"use strict";angular.module("angularApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/user/:username/repository/:reponame",{templateUrl:"views/repository.html",controller:"RepositoriesCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("angularApp").controller("MainCtrl",["$scope","UserInformations","UserRepositories",function(a,b,c){a.limitVisualization=5,a.username="marcelobarreto",a.visualizationToggle=function(){a.limitVisualization=a.repos.length},a.reSearch=function(b){a.username=b,d(),e()};var d=function(){b.get({username:a.username}).$promise.then(function(b){a.user=b},function(b){console.log(b),a.userNotFound=!0,a.usernameForm.$setPristine()})},e=function(){c.get({username:a.username}).$promise.then(function(b){a.repos=b},function(b){console.log(b),a.error="Não foi possível carregar os repositórios deste usuário"})};d(),e()}]),angular.module("angularApp").factory("UserInformations",["$resource",function(a){return a("https://api.github.com/users/:username",{username:"@username"},{get:{method:"GET",isArray:!1}})}]),angular.module("angularApp").factory("UserRepositories",["$resource",function(a){return a("http://api.github.com/users/:username/repos",{username:"@username"},{get:{method:"GET",isArray:!0}})}]),angular.module("angularApp").controller("RepositoriesCtrl",["$scope","$routeParams","Repository","RepositoryIssues","RepositoryPullRequests",function(a,b,c,d,e){var f=function(){c.get({username:b.username,repo:b.reponame}).$promise.then(function(b){a.repo=b},function(a){console.log(a)})},g=function(){d.get({username:b.username,repo:b.reponame}).$promise.then(function(b){a.issues=b},function(a){console.log(a)})},h=function(){e.get({username:b.username,repo:b.reponame}).$promise.then(function(b){a.pullRequests=b},function(a){console.log(a)})};f(),g(),h()}]),angular.module("angularApp").factory("Repository",["$resource",function(a){return a("https://api.github.com/repos/:username/:repo",{username:"@username",repo:"@repo"},{get:{method:"GET",isArray:!1}})}]),angular.module("angularApp").factory("RepositoryIssues",["$resource",function(a){return a("https://api.github.com/repos/:username/:repo/issues?state=open",{username:"@username",repo:"@repo"},{get:{method:"GET",isArray:!0}})}]),angular.module("angularApp").factory("RepositoryPullRequests",["$resource",function(a){return a("https://api.github.com/repos/:username/:repo/pulls?state=open",{username:"@username",repo:"@repo"},{get:{method:"GET",isArray:!0}})}]),angular.module("angularApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="alert alert-danger alert-dismissible" role="alert" ng-if="userNotFound && usernameForm.$pristine"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button> O usuário <strong>{{username}}</strong> não foi encontrado. </div> <div class="row"> <div class="col-sm-8 col-xs-offset-2 col-md-3 col-md-offset-0"> <img ng-src="{{user.avatar_url}}" class="center-block img-responsive" height="260" width="260"> <hr> <div class="row"> <div class="col-sm-12 col-md-12"> <form name="usernameForm" ng-submit="usernameForm.$valid && reSearch(username)" class="input-group"> <input type="text" class="form-control" ng-model="username" ng-required="true" placeholder="Nome de usuário"> <span class="input-group-btn"> <button class="btn btn-primary" type="button" ng-click="reSearch(username)">Procurar</button> </span> </form> </div> </div> <div class="caption"> <h3>{{user.name}}</h3> <p>{{user.email}}</p> <p> <i class="glyphicon glyphicon-star"></i> <span> <small> <b>Seguidores ({{user.followers}})</b> </small> </span> </p> <p> <i class="glyphicon glyphicon-star-empty"></i> <span> <small> <b>Seguindo ({{user.following}})</b> </small> </span> </p> <p> <b>Repositórios ({{repos.length}})</b> </p><p> <small>Você atualmente está vendo {{limitVisualization}} repositórios</small> </p>  <p> <button ng-click="visualizationToggle()" class="btn btn-block btn-primary"> Ver todos repositórios </button> </p> </div> </div> <div class="col-sm-12 col-md-9"> <div class="panel panel-primary"> <div class="panel-heading"> <h2 class="panel-title">Repositórios</h2> <input type="text" class="form-control" ng-model="filterRepo" placeholder="Filtre por um repositório..."> </div> <div class="list-group"> <a href="#/" class="list-group-item" ng-show="!repos.length">Este usuário não possui nenhum repositório público</a> <a ng-href="#/user/{{username}}/repository/{{repo.name}}" class="list-group-item" ng-repeat="repo in repos | orderBy: \'stargazers_count\':true |  limitTo:limitVisualization | filter: filterRepo"> <h4 class="list-group-item-heading">{{repo.name}}</h4> <p> <i class="glyphicon glyphicon-star"></i> {{repo.stargazers_count}} </p> <p ng-if="repo.fork"> <i class="glyphicon glyphicon-heart"></i> <span>Fork</span> </p> </a> </div> </div> </div> </div>'),a.put("views/repository.html",'<div class="row"> <div class="col-sm-12 col-md-3"> <div class="caption"> <h3>{{repo.name}}</h3> <p>{{repo.description}}</p> <p> <i class="glyphicon glyphicon-star"></i> <span> <small> <b>Estrelas ({{repo.stargazers_count}})</b> </small> </span> </p> <p> <i class="glyphicon glyphicon-eye-open"></i> <span> <small> <b>Visualizadores ({{repo.subscribers_count}})</b> </small> </span> </p> <p> <i class="glyphicon glyphicon-folder-open"></i> <span> <small> <b>Linguagem principal {{repo.language}}</b> </small> </span> </p> </div> </div> <div class="col-sm-12 col-md-5"> <div class="panel panel-primary"> <div class="panel-heading"> <h2 class="panel-title">Issues</h2> <input type="text" class="form-control" ng-model="filterIssue" placeholder="Filtre por uma issue ..."> </div> <div class="list-group"> <a href="#/" class="list-group-item" ng-show="!issues.length">Nenhuma issue nesse projeto</a> <a class="list-group-item" ng-repeat="issue in issues | filter: filterIssue"> <h4 class="list-group-item-heading">{{issue.title}}</h4> <p> <i class="glyphicon glyphicon-star"></i> {{issue.user.login}} </p> </a> </div> </div> </div> <div class="col-sm-12 col-md-4"> <div class="panel panel-primary"> <div class="panel-heading"> <h2 class="panel-title">Pull Requests</h2> <input type="text" class="form-control" ng-model="filterPullRequest" placeholder="Filtre por um pull request..."> </div> <div class="list-group"> <a href="#/" class="list-group-item" ng-show="!pullRequests.length">Nenhum PR para esse projeto</a> <a class="list-group-item" ng-repeat="pr in pullRequests | filter: filterPullRequest"> <h4 class="list-group-item-heading">{{pr.title}}</h4> <p> <i class="glyphicon glyphicon-star"></i> {{pr.user.login}} </p> </a> </div> </div> </div> </div>')}]);