<navbar></navbar>

<div class="container">

    <div ng-class="!vm.repositorios.length ? 'busca-repositorio':'text-right'">
        <p ng-if="!vm.repositorios.length">Faça uma busca para encontrar os repositórios</p>
        <div class="col-md-12">
            <form class="form-inline">
                <div class="form-group">
                    <input type="text" ng-model="vm.busca" class="form-control" placeholder="Encontrar Repositórios">
                </div>
                <button type="submit" ng-click="vm.buscarRepositorios()" class="btn btn-default">Buscar</button>
            </form>
        </div>
    </div>

    <div ng-if="vm.repositorios.length">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Usuário</th>
                    <th>Repositório</th>
                    <th>Stars</th>
                    <th>Forks</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="repositorio in vm.repositorios">
                    <td>
                        <img class="avatar" ng-if="repositorio.owner.avatar_url" ng-src="{{repositorio.owner.avatar_url}}"/>
                        {{repositorio.owner.login}}
                    </td>
                    <td>
                        {{repositorio.name}}
                    </td>
                    <td>
                        <i class="fa fa-star-o" aria-hidden="true"></i> {{repositorio.stargazers_count}}
                    </td>
                    <td>
                        <i class="fa fa-code-fork" aria-hidden="true"></i> {{repositorio.forks_count}}
                    </td>
                    <td class="text-right">
                        <a class="btn btn-link" href="/#/repositorio/{{repositorio.owner.login}}/{{repositorio.name}}/{{vm.busca}}"><i class="fa fa-eye" aria-hidden="true"></i> Visualizar</a>
                        <a class="btn btn-link" target="_blank" href="https://github.com/{{repositorio.owner.login}}/{{repositorio.name}}"><i class="fa fa-github-alt" aria-hidden="true"></i> Ir para GitHub</a>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="col-sm-12 text-right" aria-hidden="false">
            <div class="btn-group pagination">
                <button ng-click="vm.prevPage()" ng-disabled="!vm.hasPrevPage()" class="btn btn-default" aria-disabled="false">
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                </button>
                <button ng-click="vm.nextPage()" ng-disabled="!vm.hasNextPage()" class="btn btn-default" aria-disabled="false">
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </button>
            </div>
            <p class="pagination-caption ng-binding">Exibindo página {{vm.pagina}} de {{vm.totalPaginas}} </p>
        </div>
    </div>
</div>
